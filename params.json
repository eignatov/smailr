{"name":"Smailr","body":"# Smailr - Virtual Mail Hosting Management CLI\r\n\r\nSmailr is a small CLI application, which lets you manage a typical mail stack. Smailr is simple, its small and its fast. It uses Sqlite for its underlaying database and comes with example configurations for Exim and Dovecot.\r\n\r\n> Please note, Smailr is still in development! And I still didn't figure out on how to do database upgrades.\r\n\r\n## Installation\r\n\r\nInstall Smailr\r\n\r\n    # gem install smailr\r\n\r\nAdd a user which will own the mails and is used for the LDA\r\n\r\n    # useradd -r -d /srv/mail vmail\r\n    # mkdir /srv/mail/users\r\n    # chown -R vmail:vmail /srv/mail\r\n\r\nInstall Exim and Dovecot\r\n\r\n    # aptitude install exim-daemon-heavy dovecot-imapd dovecot-pop3d\r\n\r\nInstall the example Exim and Dovecot configration files on your mailserver.\r\n\r\n    # smailr setup\r\n    *****************************************************************\r\n    All needed configuration files are in ./smailr-etc for review.\r\n    \r\n    Please install exim4, dovecot and then run the commands below, or\r\n    adjust the file locations according to your environment.\r\n    \r\n    Also make sure to configure a location for the SQLite database\r\n    file in samilr.yml.\r\n    \r\n    Then run 'smailr migrate' to initialize the database.\r\n    *****************************************************************\r\n    \r\n    cp smailr-etc/smailr.yml /etc/smailr.yml\r\n    cp smailr-etc/dovecot.conf /etc/dovecot/\r\n    cp smailr-etc/dovecot-sql.conf /etc/dovecot/\r\n    cp smailr-etc/exim4/\r\n\r\n    # invoke-rc.d exim4 restart\r\n    # invoke-rc.d dovecot restart\r\n\r\nRun the setup command to initialize the smailr database run:\r\n\r\n    # smailr migrate\r\n\r\nYou should now be ready to just manage your mailserver with the commands listed\r\nbelow.\r\n\r\n## Managing your mailserver\r\n\r\n### Domains\r\n\r\nAdd a local domain\r\n\r\n    smailr add example.com\r\n\r\nRemove a local domain and all associated mailboxes\r\n\r\n    smailr rm example.com\r\n\r\nList all domains\r\n\r\n    smailr ls\r\n\r\n### Mailboxes\r\n\r\nAdd a new local mailbox. This will interactively ask you for the user password\r\n\r\n    smailr add user@example.com\r\n\r\nYou can as well specify the password on the CLI\r\n\r\n    smailr add user@example.com --password secretpass\r\n\r\nRemove a local mailbox\r\n\r\n    smailr rm user@example.com\r\n\r\nList all addresses for a domain\r\n\r\n    smailr ls example.com\r\n\r\nUpdate a users passowrd\r\n\r\n    smailr passwd user@example.com\r\n\r\n### Aliases\r\n\r\nSimply add an 'user-alias@example.com' alias to the 'user@example.com' mailbox.\r\n\r\n    smailr add user-alias@example.com --alias user@example.com\r\n\r\nTo remove the alias again, run the rm command.\r\n\r\n    smailr rm user-alias@example.com --alias user@example.com\r\n\r\nYou can as well specify multiple destinations for both commands separated by a comma:\r\n\r\n    smailr add user-alias@example.com --alias user@example.com,user1@example.com\r\n\r\n### DKIM\r\n\r\nYou can even manage RSA keys for Domain Key Identified Mail (DKIM).\r\n\r\nTo create a new key for the selector MX do:\r\n\r\n    # smailr add example.com --dkim mx\r\n    public-key MIGJAo<snip>AAE= # returns the public key to use\r\n\r\nTo remove the key again run:\r\n\r\n    smailr rm example.com --dkim mx\r\n\r\n**IMPORTANT NOTE**: You will need to setup DNS manually for DKIM to work. The\r\nabove example requires the following DNS records:\r\n\r\n    $ORIGIN example.com\r\n       _domainkey     IN      TXT     \"t=y\\; o=~\\;\"\r\n    mx._domainkey     IN      TXT     \"v=DKIM1\\; t=y\\; k=rsa\\; p=MIGJAo<snip>AAE=\"\r\n\r\nFurther explenation:\r\n\r\n    'mx'   matches up with your dkim_selector specified on you CLI.\r\n\r\n    't=y'  tells remote MTAs, that you are still testing DKIM.\r\n           Use t=n once everything works.\r\n\r\n    'o=~'  tells everybody, that only some may gets signed.\r\n           Use o=- if you want to sign everything.\r\n\r\nThe exim configuration assumes a selector of 'mx' by default. You can change that, so\r\nit matches something else. Eg. the current month of the year, in case you want\r\nto generate a new key every month.\r\n\r\nCheck the remote\\_smtp transport configuration in the supplied Exim configuration file\r\nto change that.\r\n\r\n### Mutt\r\n\r\nSmailr can launch mutt with the required configuration for a specific mailbox\r\nautomatically. Open mutt for the specified mailbox:\r\n\r\n    smailr mutt user@example.com\r\n\r\n## Compatibility\r\n\r\nSmailr was developed an tested on Debian/Squeeze and should be easily portable\r\nto any other system.\r\n\r\n## BUGS\r\n\r\nFor bugs or feature requests, please use the GitHub issue tracker.\r\n\r\nhttps://github.com/sts/smailr/issues\r\n\r\n\r\n## WHO\r\n\r\nStefan Schlesinger / sts@ono.at / @stsonoat / http://sts.ono.at\r\n","tagline":"Exim Virtual Mail Hosting Management CLI","google":"UA-31443839-1","note":"Don't delete this file! It's used internally to help with page regeneration."}